/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { safeParse } from "../../lib/schemas.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import { SDKValidationError } from "../errors/sdkvalidationerror.js";
import {
  InstantBankFailureCode,
  InstantBankFailureCode$inboundSchema,
  InstantBankFailureCode$outboundSchema,
} from "./instantbankfailurecode.js";
import {
  InstantBankNetwork,
  InstantBankNetwork$inboundSchema,
  InstantBankNetwork$outboundSchema,
} from "./instantbanknetwork.js";
import {
  InstantBankTransactionStatus,
  InstantBankTransactionStatus$inboundSchema,
  InstantBankTransactionStatus$outboundSchema,
} from "./instantbanktransactionstatus.js";

/**
 * Instant-bank specific details about the transaction.
 */
export type InstantBankTransactionDetails = {
  /**
   * The network that the transaction was processed on.
   */
  network: InstantBankNetwork;
  /**
   * Status of a transaction within the instant-bank lifecycle.
   */
  status: InstantBankTransactionStatus;
  /**
   * Response code returned by network on failure.
   */
  networkResponseCode?: string | undefined;
  /**
   * Status codes for instant-bank failures.
   */
  failureCode?: InstantBankFailureCode | undefined;
  endToEndID?: string | undefined;
  initiatedOn?: Date | undefined;
  completedOn?: Date | undefined;
  failedOn?: Date | undefined;
  acceptedWithoutPostingOn?: Date | undefined;
};

/** @internal */
export const InstantBankTransactionDetails$inboundSchema: z.ZodType<
  InstantBankTransactionDetails,
  z.ZodTypeDef,
  unknown
> = z.object({
  network: InstantBankNetwork$inboundSchema,
  status: InstantBankTransactionStatus$inboundSchema,
  networkResponseCode: z.string().optional(),
  failureCode: InstantBankFailureCode$inboundSchema.optional(),
  endToEndID: z.string().optional(),
  initiatedOn: z.string().datetime({ offset: true }).transform(v => new Date(v))
    .optional(),
  completedOn: z.string().datetime({ offset: true }).transform(v => new Date(v))
    .optional(),
  failedOn: z.string().datetime({ offset: true }).transform(v => new Date(v))
    .optional(),
  acceptedWithoutPostingOn: z.string().datetime({ offset: true }).transform(v =>
    new Date(v)
  ).optional(),
});
/** @internal */
export type InstantBankTransactionDetails$Outbound = {
  network: string;
  status: string;
  networkResponseCode?: string | undefined;
  failureCode?: string | undefined;
  endToEndID?: string | undefined;
  initiatedOn?: string | undefined;
  completedOn?: string | undefined;
  failedOn?: string | undefined;
  acceptedWithoutPostingOn?: string | undefined;
};

/** @internal */
export const InstantBankTransactionDetails$outboundSchema: z.ZodType<
  InstantBankTransactionDetails$Outbound,
  z.ZodTypeDef,
  InstantBankTransactionDetails
> = z.object({
  network: InstantBankNetwork$outboundSchema,
  status: InstantBankTransactionStatus$outboundSchema,
  networkResponseCode: z.string().optional(),
  failureCode: InstantBankFailureCode$outboundSchema.optional(),
  endToEndID: z.string().optional(),
  initiatedOn: z.date().transform(v => v.toISOString()).optional(),
  completedOn: z.date().transform(v => v.toISOString()).optional(),
  failedOn: z.date().transform(v => v.toISOString()).optional(),
  acceptedWithoutPostingOn: z.date().transform(v => v.toISOString()).optional(),
});

export function instantBankTransactionDetailsToJSON(
  instantBankTransactionDetails: InstantBankTransactionDetails,
): string {
  return JSON.stringify(
    InstantBankTransactionDetails$outboundSchema.parse(
      instantBankTransactionDetails,
    ),
  );
}
export function instantBankTransactionDetailsFromJSON(
  jsonString: string,
): SafeParseResult<InstantBankTransactionDetails, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => InstantBankTransactionDetails$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'InstantBankTransactionDetails' from JSON`,
  );
}
